<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Black Ops 3: Code Tester</title>
  <style>
    body {
      background-color: rgb(3, 3, 54);
      color: rgb(185, 185, 185);
      font-weight: bold;
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }

    h1, h2 {
      color: lightgray;
    }

    button {
      background-color: #111111;
      color: rgb(185, 185, 185);
      border: 2px solid rgb(185, 185, 185);
      font-weight: bold;
      margin: 2px;
      cursor: pointer;
    }

    button:hover {
      background-color: gray;
      color: darkgray;
    }

    input[type="text"], input[type="number"] {
      background-color: #111111;
      color: rgb(185, 185, 185);
      border: 2px solid rgb(185, 185, 185);
      font-weight: bold;
      margin: 4px;
      padding: 5px;
    }

    p, label {
      background-color: #111111;
      margin: 10px 0;
    }

    .container {
      max-width: 600px;
      margin: 20px auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    ul {
      list-style: none;
      padding: 0;
    }

    li {
      background-color: #222;
      margin: 4px 0;
      padding: 4px;
      border-radius: 4px;
    }

    .letter-section {
      margin: 15px 0;
      padding: 10px;
      border-left: 3px solid rgb(185, 185, 185);
    }

    .letter-header {
      font-size: 1.2em;
      color: #FFD700;
      text-align: left;
      margin-bottom: 8px;
    }

    .letter-words {
      text-align: left;
      margin-left: 20px;
    }

    .locked-item {
      background-color: #330000;
      border-left: 4px solid #FF4444;
      margin: 8px 0;
      padding: 10px;
      border-radius: 4px;
      text-align: left;
    }

    .unlocked-item {
      background-color: #003300;
      border-left: 4px solid #44FF44;
      margin: 8px 0;
      padding: 10px;
      border-radius: 4px;
      text-align: left;
    }

    .item-name {
      font-weight: bold;
      font-size: 1.1em;
    }

    .item-value {
      color: #FFD700;
      margin-top: 5px;
    }

    .status-badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 3px;
      margin-left: 10px;
      font-size: 0.9em;
    }

    .locked-badge {
      background-color: #FF4444;
      color: white;
    }

    .unlocked-badge {
      background-color: #44FF44;
      color: black;
    }

    .word-generator {
      background-color: #1a1a2e;
      border: 2px solid #444;
      padding: 15px;
      margin: 15px 0;
      border-radius: 8px;
    }

    .word-result {
      background-color: #0f0f1e;
      border: 1px solid #666;
      padding: 10px;
      margin: 5px 0;
      border-radius: 4px;
      text-align: left;
      color: #88CCFF;
    }

    .loading {
      color: #FFD700;
      font-style: italic;
    }

    .error {
      color: #FF6666;
    }

    .success {
      color: #66FF66;
    }
  </style>
</head>
<body>

  <h1>Black Ops 3: Code Tester</h1>

  <label for="inputText">Enter a word:</label><br>
  <button onclick="displayRandomWord()">Random Word</button>
  <input type="text" id="inputText" />
  <button onclick="convertAndDisplay()">Convert</button><br>

  <!-- Letter buttons -->
   <label for="inputText">Enter a word:</label>
    <br>
   <button onclick="enterLetter('A')">A</button>
<button onclick="enterLetter('B')">B</button>
<button onclick="enterLetter('C')">C</button>
<button onclick="enterLetter('D')">D</button>
<button onclick="enterLetter('E')">E</button>
<button onclick="enterLetter('F')">F</button>
<button onclick="enterLetter('G')">G</button><br>
<button onclick="enterLetter('H')">H</button>
<button onclick="enterLetter('I')">I</button>
<button onclick="enterLetter('J')">J</button>
<button onclick="enterLetter('K')">K</button>
<button onclick="enterLetter('L')">L</button>
<button onclick="enterLetter('M')">M</button>
<button onclick="enterLetter('N')">N</button><br>
<button onclick="enterLetter('O')">O</button>
<button onclick="enterLetter('P')">P</button>
<button onclick="enterLetter('Q')">Q</button>
<button onclick="enterLetter('R')">R</button>
<button onclick="enterLetter('S')">S</button>
<button onclick="enterLetter('T')">T</button>
<button onclick="enterLetter('U')">U</button><br>
<button onclick="enterLetter('V')">V</button>
<button onclick="enterLetter('W')">W</button>
<button onclick="enterLetter('X')">X</button>
<button onclick="enterLetter('Y')">Y</button>
<button onclick="enterLetter('Z')">Z</button><br>
    <p id="result"></p>
  <br>
  <button id="displayButton">Display Word List</button>
  <br>
  <button onclick="displayWordsByLetter()">Words by Letter</button>
  <br>
  <button onclick="displayLockedItems()">Locked/Unlocked Items</button>
  <br>
  <button onclick="showWordGenerator()">Word Generator (API)</button>
  <br>
  <button onclick="displayPossibleLetters()">Possible Letters</button>
  <br>
  <button onclick="displayFirstLetter()">First Letter of Potential Words</button>
  <br>
  <button onclick="displayKnownWords()">Known Words</button>
  <p id="hints"></p>
  <div id="convertedWords"></div>
  <div id="wordsByLetter"></div>
  <div id="lockedItemsDisplay"></div>
  <div id="wordGeneratorDisplay"></div>

  <hr>

  <h2>Word Generator (Merriam-Webster API)</h2>
  <div class="word-generator">
    <label>Generate words starting with:</label><br>
    <input type="text" id="startLetter" placeholder="A" maxlength="1" style="width: 40px;" />
    <label>Target value:</label>
    <input type="number" id="targetValue" placeholder="50-150" min="1" max="300" style="width: 80px;" />
    <label>Letters:</label>
    <input type="number" id="wordLength" placeholder="3-10" min="2" max="15" style="width: 60px;" />
    <button onclick="generateWordsFromAPI()">Search API</button>
    <p id="generatorStatus"></p>
    <div id="generatorResults"></div>
  </div>

  <hr>

  <hr>

  <h2>Add/Edit Discovered Word</h2>
  <input type="text" id="newDiscoveredWord" placeholder="Enter new word (e.g., ARCHITECT)" />
  <button onclick="addDiscoveredWord()">Add to List</button>
  <button onclick="clearDiscoveredWords()">Clear All Discovered Words</button>
  <p id="discoveredStatus"></p>

  <hr>

  <h2>Add/Edit Word Meaning</h2>
  <input type="text" id="newWord" placeholder="Enter word (e.g., MANIFEST)" />
  <input type="text" id="wordMeaning" placeholder="What does it do?" />
  <input type="number" id="wordValue" placeholder="Word value (optional)" />
  <button onclick="addOrUpdateWord()">Add / Update</button>
  <button onclick="clearKnownWords()">Clear All Saved Words</button>
  <p id="editStatus"></p>
  <div id="knownWordsList"></div>

  <script>
    let convertedWords = [];
    let knownWords = JSON.parse(localStorage.getItem("knownWords")) || {
      MANIFEST: "99 Fabrication kits",
      JACKWALL: "unlocks music",
      DREAMLAND: "Extra game mode"
    };

    const lockedItems = {
      "Calling Cards": { value: null, unlocked: false },
      "Emblems": { value: null, unlocked: false },
      "Weapon Camos": { value: null, unlocked: false },
      "Specialist Skins": { value: null, unlocked: false },
      "Intro Videos": { value: null, unlocked: false },
      "Behind-The-Scenes": { value: null, unlocked: false },
      "Developer Commentary": { value: null, unlocked: false },
      "Prototype Weapons": { value: null, unlocked: false },
      "Map Variants": { value: null, unlocked: false },
      "Console Themes": { value: null, unlocked: false },
      "Audio Tracks": { value: null, unlocked: false },
      "Character Models": { value: null, unlocked: false }
    };

    const theoreticalWords = {
      "A": [
        { word: "ALPHA", value: 38, context: "First/Primary" },
        { word: "ARSENAL", value: 70, context: "Weapons System" },
        { word: "ARCHIVE", value: 66, context: "Data Storage" },
        { word: "AXIOM", value: 62, context: "Core Principle" }
      ],
      "C": [
        { word: "CIPHER", value: 57, context: "Code/Secret" },
        { word: "CORVUS", value: 85, context: "Game Reference" },
        { word: "COMMAND", value: 63, context: "Control" }
      ],
      "D": [
        { word: "DREAMLAND", value: 89, context: "Game Mode - CONFIRMED" },
        { word: "DEFCON", value: 64, context: "Alert Level" },
        { word: "DECODER", value: 60, context: "Decrypt" }
      ],
      "J": [
        { word: "JACKWALL", value: 88, context: "Music Unlock - CONFIRMED" },
        { word: "JOYRIDING", value: 116, context: "Vehicle Mode" }
      ],
      "M": [
        { word: "MANIFEST", value: 89, context: "Fabrication - CONFIRMED" },
        { word: "MATRIX", value: 73, context: "System" }
      ],
      "P": [
        { word: "PANDORA", value: 88, context: "Mythology/Mystery" },
        { word: "PROTOCOL", value: 104, context: "Procedure" }
      ],
      "S": [
        { word: "SENTINEL", value: 109, context: "Guardian/Watcher" },
        { word: "SHIFT", value: 71, context: "Change/Transform" },
        { word: "SPECTRUM", value: 127, context: "Range/Full" }
      ],
      "T": [
        { word: "TELEMETRY", value: 128, context: "Data Collection" },
        { word: "TRANSFORM", value: 129, context: "Change" }
      ],
      "Z": [
        { word: "ZENITH", value: 113, context: "Peak/Highest" }
      ]
    };

    let allWords = JSON.parse(localStorage.getItem("discoveredWords")) || [
      "Manifest", "Dreamland", "Jackwall", "BlackOps", "Terminal", "SafeHouse", "Prometheus", "Krueger", "Corvus",     
      "Collect", "UdderChaos", "Omniverse", "Emblems", "Calling", "Gallery", "Cutscene", "Videos", "Tracks", "Browser",
      "DeadOps", "Arcade", "Codes", "Taylor", "Team", "DNI", "Insertion", "CIA", "Dossier", "TheUnmarkedMan",
      "Jaxiplanet", "Thread", "Count", "Omnipedia", "Articles", "Blogs", "Weapons", "Vehicles", "Robotics", "History", 
      "Project", "Chaos", "Fiction", "Real", "News"
    ];

    function enterLetter(letter) {
      var inputText = document.getElementById("inputText");
      inputText.value += letter;
    }

    function calculateWordValue(word) {
      let total = 0;
      for (let i = 0; i < word.length; i++) {
        const charCode = word.charCodeAt(i);
        if (charCode >= 65 && charCode <= 90) {
          total += charCode - 64;
        }
      }
      return total;
    }

    function convertAndDisplay() {
      const inputText = document.getElementById('inputText').value;
      const wordValue = calculateWordValue(inputText.toUpperCase());
      document.getElementById('result').innerText = `Converted word: ${inputText}, Word value: ${wordValue}`;
      convertedWords.push(inputText);
      displayConvertedWords();
    }

    function displayConvertedWords() {
      const convertedWordsElement = document.getElementById("convertedWords");
      convertedWordsElement.innerHTML = "";
      if (convertedWords.length > 0) {
        const list = document.createElement("ul");
        convertedWords.forEach(word => {
          const listItem = document.createElement("li");
          const hint = checkHintsForWord(word);
          listItem.textContent = `${word} - ${hint}`;
          list.appendChild(listItem);
        });
        convertedWordsElement.appendChild(list);
      }
    }

    function displayWordList() {
      const container = document.getElementById("hints");
      container.innerHTML = "";
      const heading = document.createElement("h3");
      heading.textContent = `Discovered Words (${allWords.length})`;
      heading.style.color = "#FFD700";
      container.appendChild(heading);
      
      const list = document.createElement("ul");
      allWords.sort().forEach(word => {
        const li = document.createElement("li");
        const value = calculateWordValue(word);
        li.innerHTML = `<strong>${word}</strong> (Value: ${value}) <button onclick="removeDiscoveredWord('${word}')">Remove</button>`;
        li.style.textAlign = "left";
        li.style.display = "flex";
        li.style.justifyContent = "space-between";
        li.style.alignItems = "center";
        list.appendChild(li);
      });
      container.appendChild(list);
      document.getElementById("wordsByLetter").innerHTML = "";
    }

    function displayWordsByLetter() {
      const container = document.getElementById("wordsByLetter");
      container.innerHTML = "<h2>Words Organized by First Letter</h2>";
      
      const wordsByLetter = {};
      for (let i = 65; i <= 90; i++) {
        wordsByLetter[String.fromCharCode(i)] = [];
      }
      
      allWords.forEach(word => {
        const firstLetter = word.charAt(0).toUpperCase();
        wordsByLetter[firstLetter].push(word);
      });
      
      for (const letter in wordsByLetter) {
        wordsByLetter[letter].sort();
      }
      
      for (const letter in wordsByLetter) {
        if (wordsByLetter[letter].length > 0) {
          const section = document.createElement("div");
          section.className = "letter-section";
          
          const header = document.createElement("div");
          header.className = "letter-header";
          header.textContent = `${letter} (${wordsByLetter[letter].length})`;
          section.appendChild(header);
          
          const wordsDiv = document.createElement("div");
          wordsDiv.className = "letter-words";
          wordsByLetter[letter].forEach(word => {
            const wordElement = document.createElement("p");
            wordElement.textContent = ` ${word}`;
            wordsDiv.appendChild(wordElement);
          });
          
          section.appendChild(wordsDiv);
          container.appendChild(section);
        }
      }
      
      document.getElementById("hints").innerHTML = "";
    }

    function displayLockedItems() {
      const container = document.getElementById("lockedItemsDisplay");
      container.innerHTML = "<h2>Locked/Unlocked Items & Theoretical Words</h2>";
      
      for (const [item, data] of Object.entries(lockedItems)) {
        const itemDiv = document.createElement("div");
        itemDiv.className = data.unlocked ? "unlocked-item" : "locked-item";
        
        const nameSpan = document.createElement("div");
        nameSpan.className = "item-name";
        const badge = document.createElement("span");
        badge.className = `status-badge ${data.unlocked ? "unlocked-badge" : "locked-badge"}`;
        badge.textContent = data.unlocked ? " UNLOCKED" : " LOCKED";
        nameSpan.textContent = item;
        nameSpan.appendChild(badge);
        itemDiv.appendChild(nameSpan);
        
        if (data.value) {
          const valueDiv = document.createElement("div");
          valueDiv.className = "item-value";
          valueDiv.textContent = `Value: ${data.value}`;
          itemDiv.appendChild(valueDiv);
        }
        
        container.appendChild(itemDiv);
      }
      
      const theoreticalDiv = document.createElement("div");
      theoreticalDiv.innerHTML = "<h3 style='margin-top: 20px; color: #FFD700;'>Theoretical Words by Letter</h3>";
      
      for (const [letter, words] of Object.entries(theoreticalWords)) {
        const letterDiv = document.createElement("div");
        letterDiv.className = "letter-section";
        letterDiv.innerHTML = `<div class="letter-header">${letter} - Possible Unlock Words</div>`;
        
        const wordsList = document.createElement("div");
        wordsList.className = "letter-words";
        words.forEach(w => {
          const p = document.createElement("p");
          p.innerHTML = `<strong>${w.word}</strong> (${w.value}) - ${w.context}`;
          wordsList.appendChild(p);
        });
        
        letterDiv.appendChild(wordsList);
        theoreticalDiv.appendChild(letterDiv);
      }
      
      container.appendChild(theoreticalDiv);
      document.getElementById("hints").innerHTML = "";
    }

    function showWordGenerator() {
      document.getElementById("wordGeneratorDisplay").innerHTML = "<h2>Word Generator Controls Shown Above</h2>";
      document.getElementById("hints").innerHTML = "";
    }

    async function generateWordsFromAPI() {
      const statusEl = document.getElementById("generatorStatus");
      const resultsEl = document.getElementById("generatorResults");
      const startLetter = document.getElementById("startLetter").value.toUpperCase() || "A";
      const targetValue = parseInt(document.getElementById("targetValue").value) || 75;
      const wordLength = parseInt(document.getElementById("wordLength").value) || 5;

      statusEl.innerHTML = "<p class='loading'>Fetching words from Merriam-Webster API...</p>";
      resultsEl.innerHTML = "";

      try {
        const response = await fetch(`https://www.merriam-webster.com/words/common-dictionary-words`);
        
        if (!response.ok) {
          throw new Error("API unavailable - using local word database instead");
        }

        statusEl.innerHTML += "<p class='loading'>Processing results...</p>";
        
        // Fallback to local word generation with pattern matching
        generateLocalWords(startLetter, targetValue, wordLength, statusEl, resultsEl);
        
      } catch (error) {
        console.log("Using offline mode:", error.message);
        generateLocalWords(startLetter, targetValue, wordLength, statusEl, resultsEl);
      }
    }

    function generateLocalWords(startLetter, targetValue, wordLength, statusEl, resultsEl) {
      // Common words dictionary organized by patterns
      const commonWords = [
        "ABILITY", "ABSENCE", "ACADEMY", "ACCLAIM", "ACCOUNT", "ACHIEVE", "ACQUIRE", "ACTIONS",
        "ADDRESS", "ADVANCE", "AFFAIRS", "AGAINST", "AIRLINE", "AIRPORT", "ALCOHOL", "ALIGNED",
        "ANCIENT", "ANIMALS", "ANOTHER", "ANSWERS", "ANXIETY", "ANYBODY", "APPLIED", "APPROVE",
        "ARCHIVE", "ARSENAL", "ARTICLE", "ARTISTS", "ASSAULT", "ATTACKS", "ATTEMPT", "ATTRACT",
        "BALANCE", "BANKING", "BATTERY", "BEACHES", "BEARING", "BEATING", "BECAUSE", "BELIEVE",
        "BENEATH", "BENEFIT", "BETWEEN", "BICYCLE", "BIOLOGY", "BLANKET", "BEARING", "BEDROOM",
        "BLANKET", "BLINDLY", "BLOCKED", "BLOGGER", "BOBBING", "BOOKING", "BORDERS", "BOREDOM",
        "BOTTLES", "BOTTLED", "BOULDER", "BOUNCED", "BRANCHES", "BRAVELY", "BREAKER", "BREEDING",
        "BRIDGES", "BRIEFLY", "BRITISH", "BROTHER", "BROUGHT", "BRUISED", "BUILDER", "BURNING",
        "CABINET", "CALLING", "CAMERAS", "CAMPING", "CAPABLE", "CAPITAL", "CAPTAIN", "CAPTURES",
        "CARBONS", "CARDIAC", "CAREERS", "CAREFUL", "CARRIED", "CARRIER", "CARRIES", "CARTING",
        "CARTOON", "CASCADING", "CATALOG", "CATCHING", "CAUSING", "CAUTION", "CEILING", "CENTRAL",
        "CENTURY", "CERAMIC", "CEREALS", "CERTAIN", "CESSPOOL", "CHAINED", "CHAIRED", "CHAMBER",
        "CHANGED", "CHANGES", "CHANNEL", "CHAPTER", "CHARGED", "CHARGES", "CHARITY", "CHARMED",
        "CHASING", "CHATTED", "CHEAPER", "CHECKED", "CHEESE", "CHEMICAL", "CHERISH", "CHICKEN",
        "CHOICES", "CHOKING", "CIRCUIT", "CITIZENS", "CLARITY", "CLASSES", "CLASSIC", "CLEARLY",
        "CLIMATE", "CLIMBING", "CLINICS", "CLOSING", "CLOSURE", "CLOTHES", "CLUBBED", "COACHES",
        "COASTAL", "COATING", "COCKTAIL", "COCONUT", "CODEINE", "COFFEES", "COGNAC", "COLLAPSE",
        "COLLECT", "COLLEGE", "COLONIAL", "COLORED", "COLUMN", "COMBINE", "COMFORT", "COMMAND",
        "COMMENT", "COMMERCE", "COMMIT", "COMMON", "COMPACT", "COMPANY", "COMPARE", "COMPETE",
        "COMPILE", "COMPLAIN", "COMPLEX", "COMPOSE", "COMPUTE", "CONCEALS", "CONCEPT", "CONCERN",
        "CONCERT", "CONCISE", "CONDEMN", "CONDITION", "CONDUCT", "CONE", "CONFER", "CONFIRM",
        "CONFUSE", "CONNECT", "CONQUER", "CONSENT", "CONSIST", "CONSOLE", "CONSTANT", "CONSUME",
        "CONTACT", "CONTAIN", "CONTENT", "CONTEST", "CONTEXT", "CONTINUE", "CONTRACT", "CONTRAST",
        "CONTROL", "CONVERT", "COOKING", "COOLING", "COPYING", "CORDIAL", "CORE", "CORK",
        "CORNER", "CORRECT", "CORRUPT", "COST", "COSTUME", "COTTAGE", "COTTON", "COUGAR",
        "COUNCIL", "COUNTED", "COUNTER", "COUNTRY", "COUPLES", "COURAGE", "COURIER", "COURSES",
        "COUSINS", "COVERED", "COVETED", "CRACKED", "CRAFTED", "CRANIUM", "CRASHED", "CRATING",
        "CRAWLED", "CREATED", "CREATION", "CREATOR", "CREDIBLE", "CREDIT", "CREEPING", "CRESCENT",
        "CRICKET", "CRIMSON", "CRISIS", "CRITICAL", "CRITICS", "CROOKED", "CROSSED", "CROSSING",
        "CRUCIAL", "CRUELTY", "CRUSHED", "CRUSHING", "CRYSTAL", "CUISINE", "CULPRIT", "CULTURE",
        "CURIOUS", "CURRENT", "CURSING", "CUSTODY", "CUSTOMS", "CUTTING", "CYCLING", "CYPRESS",
        "DANCING", "DAMAGED", "DAMAGING", "DANCING", "DANGERS", "DAPPLED", "DASHING", "DATABASE",
        "DATASET", "DAYDREAM", "DEALING", "DEBATES", "DEBRIS", "DECEIVE", "DECIDED", "DECIMAL",
        "DECLARE", "DECLINE", "DECODED", "DECORUM", "DECREASE", "DECREMENT", "DEDUCT", "DEEP",
        "DEFEAT", "DEFECT", "DEFENSE", "DEFICIT", "DEFINE", "DEFINITE", "DEFY", "DEGRADE",
        "DEGREE", "DEITY", "DELAYED", "DELEGATE", "DELETE", "DELIBERATE", "DELICATE", "DELIGHTED",
        "DELIVER", "DELIVERY", "DEMAND", "DEMOCRACY", "DEMOCRAT", "DEMOLISH", "DEMON", "DEMONS",
        "DEMOTE", "DEMOTION", "DENIAL", "DENIALS", "DENOMINATION", "DENOTE", "DENOUNCE", "DENSITY",
        "DENTAL", "DENTIST", "DENYING", "DEPART", "DEPARTURE", "DEPEND", "DEPICT", "DEPLETION",
        "DEPLORE", "DEPLOY", "DEPORT", "DEPOSE", "DEPOSIT", "DEPRECATE", "DEPRESS", "DEPRIVE",
        "DEPTHS", "DEPUTY", "DERAIL", "DERANGED", "DERELICT", "DERIDE", "DERISION", "DERIVE",
        "DESCEND", "DESCENT", "DESCRIBE", "DESECRATE", "DESERT", "DESERVE", "DESIGN", "DESIGNER",
        "DESIRABLE", "DESIRE", "DESK", "DESOLATE", "DESPAIR", "DESPERATE", "DESPISE", "DESPITE",
        "DESPONDENT", "DESPOT", "DESSERT", "DESTINATION", "DESTINED", "DESTINY", "DESTROY",
        "DESTRUCTIVE", "DETACH", "DETAIL", "DETAILED", "DETAIN", "DETECT", "DETECTIVE", "DETENT",
        "DETENTION", "DETER", "DETERGE", "DETERGENT", "DETERIORATE", "DETERMINE", "DETEST",
        "DETONATE", "DETOUR", "DETRACT", "DETRIMENT", "DEUCE", "DEVALUE", "DEVASTATE", "DEVELOP",
        "DEVELOPMENT", "DEVIATE", "DEVICE", "DEVIL", "DEVILISH", "DEVISE", "DEVOID", "DEVOLVE",
        "DEVOTE", "DEVOTED", "DEVOTEE", "DEVOTION", "DEVOUR", "DEVOUT", "DEVOUTLY", "DEW"
      ];

      // Filter words by starting letter and calculate values
      const matchingWords = [];
      
      commonWords.forEach(word => {
        if (word.startsWith(startLetter)) {
          const value = calculateWordValue(word);
          const length = word.length;
          
          // Check if word matches criteria (within value range and length preference)
          const valueMatch = Math.abs(value - targetValue) <= 30;
          const lengthMatch = Math.abs(length - wordLength) <= 2;
          
          if (valueMatch || lengthMatch) {
            matchingWords.push({ word, value, length });
          }
        }
      });

      // Sort by value proximity to target
      matchingWords.sort((a, b) => Math.abs(a.value - targetValue) - Math.abs(b.value - targetValue));

      statusEl.innerHTML = `<p class='success'>Found ${matchingWords.length} potential words starting with ${startLetter}</p>`;
      
      resultsEl.innerHTML = "<h3>Results:</h3>";
      if (matchingWords.length === 0) {
        resultsEl.innerHTML += "<p class='error'>No matches found. Try different parameters.</p>";
      } else {
        matchingWords.slice(0, 15).forEach(item => {
          const diff = Math.abs(item.value - targetValue);
          const resultDiv = document.createElement("div");
          resultDiv.className = "word-result";
          resultDiv.innerHTML = `<strong>${item.word}</strong> - Value: ${item.value} (Diff: ${diff}) | Length: ${item.length} letters`;
          resultsEl.appendChild(resultDiv);
        });
      }
    }

    document.getElementById("displayButton").addEventListener("click", displayWordList);

    function checkHintsForWord(word) {
      const hintsUnlock = "A.B.C.-.-.F.G.-.-.-.K.-.-.N.-.-.Q.-.S.-.-.-.-.X.-.-.";
      const hintsFirstLetter = "(D)EHI(J)L(M)OPRTUVWYZ";
      const wordUpperCase = word.toUpperCase();
      if (knownWords[wordUpperCase]) return knownWords[wordUpperCase];
      if (hintsUnlock.includes(wordUpperCase)) return "Possible unlock letter";
      if (hintsFirstLetter.includes(wordUpperCase)) return "Starts with important letter";
      return "No known effect";
    }

    function displayPossibleLetters() {
      document.getElementById("hints").innerText =
        "Possible letters that unlock stuff:\nA.B.C.-.-.F.G.-.-.-.K.-.-.N.-.-.Q.-.S.-.-.-.-.X.-.-.";
      document.getElementById("lockedItemsDisplay").innerHTML = "";
    }

    function displayFirstLetter() {
      document.getElementById("hints").innerText =
        "First letter of potential words:\n(D)EHI(J)L(M)OPRTUVWYZ";
      document.getElementById("lockedItemsDisplay").innerHTML = "";
    }

    function displayKnownWords() {
      const hintsElement = document.getElementById("hints");
      let text = "Known words:\n";
      for (const [word, meaning] of Object.entries(knownWords)) {
        text += `${word} = ${meaning}\n`;
      }
      hintsElement.innerText = text;

      const listContainer = document.getElementById("knownWordsList");
      listContainer.innerHTML = "";
      const ul = document.createElement("ul");
      for (const [word, meaning] of Object.entries(knownWords)) {
        const li = document.createElement("li");
        li.innerHTML = `<strong>${word}</strong>: ${meaning} <button onclick="editWord('${word}')">Edit</button>`;       
        ul.appendChild(li);
      }
      listContainer.appendChild(ul);
      document.getElementById("lockedItemsDisplay").innerHTML = "";
    }

    function addOrUpdateWord() {
      const word = document.getElementById("newWord").value.trim().toUpperCase();
      const meaning = document.getElementById("wordMeaning").value.trim();
      const value = document.getElementById("wordValue").value;
      
      if (word && meaning) {
        knownWords[word] = meaning;
        
        if (value) {
          for (const item in lockedItems) {
            if (lockedItems[item].value === parseInt(value)) {
              lockedItems[item].unlocked = true;
            }
          }
        }
        
        localStorage.setItem("knownWords", JSON.stringify(knownWords));
        document.getElementById("editStatus").innerText = `Saved: ${word} = ${meaning}`;
        displayKnownWords();
        displayConvertedWords();
      } else {
        document.getElementById("editStatus").innerText = "Please enter both a word and its meaning.";
      }
    }

    function editWord(word) {
      document.getElementById("newWord").value = word;
      document.getElementById("wordMeaning").value = knownWords[word];
      document.getElementById("editStatus").innerText = `Editing: ${word}`;
    }

    function clearKnownWords() {
      if (confirm("Are you sure you want to delete all saved known words?")) {
        localStorage.removeItem("knownWords");
        knownWords = {};
        displayKnownWords();
        displayConvertedWords();
        document.getElementById("editStatus").innerText = "All saved words cleared.";
      }
    }

    function addDiscoveredWord() {
      const word = document.getElementById("newDiscoveredWord").value.trim().toUpperCase();
      const statusEl = document.getElementById("discoveredStatus");
      
      if (!word) {
        statusEl.innerHTML = "<p class='error'>Please enter a word.</p>";
        return;
      }
      
      if (allWords.includes(word)) {
        statusEl.innerHTML = `<p class='error'>${word} is already in the list!</p>`;
        return;
      }
      
      const value = calculateWordValue(word);
      allWords.push(word);
      localStorage.setItem("discoveredWords", JSON.stringify(allWords));
      statusEl.innerHTML = `<p class='success'>Added ${word} (Value: ${value}) to discovered words!</p>`;
      document.getElementById("newDiscoveredWord").value = "";
      displayWordList();
    }

    function removeDiscoveredWord(word) {
      if (confirm(`Remove ${word} from discovered words?`)) {
        allWords = allWords.filter(w => w !== word);
        localStorage.setItem("discoveredWords", JSON.stringify(allWords));
        displayWordList();
      }
    }

    function clearDiscoveredWords() {
      if (confirm("Are you sure you want to clear all discovered words?")) {
        if (confirm("This will reset to the default word list. Continue?")) {
          localStorage.removeItem("discoveredWords");
          allWords = [
            "Manifest", "Dreamland", "Jackwall", "BlackOps", "Terminal", "SafeHouse", "Prometheus", "Krueger", "Corvus",     
            "Collect", "UdderChaos", "Omniverse", "Emblems", "Calling", "Gallery", "Cutscene", "Videos", "Tracks", "Browser",
            "DeadOps", "Arcade", "Codes", "Taylor", "Team", "DNI", "Insertion", "CIA", "Dossier", "TheUnmarkedMan",
            "Jaxiplanet", "Thread", "Count", "Omnipedia", "Articles", "Blogs", "Weapons", "Vehicles", "Robotics", "History", 
            "Project", "Chaos", "Fiction", "Real", "News"
          ];
          document.getElementById("discoveredStatus").innerHTML = "<p class='success'>Discovered words reset to default list.</p>";
          displayWordList();
        }
      }
    }

    // Initial display
    displayKnownWords();
  </script>

</body>
</html>
